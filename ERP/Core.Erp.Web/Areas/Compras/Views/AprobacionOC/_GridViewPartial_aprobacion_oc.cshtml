@{
    var grid = Html.DevExpress().GridView(settings => {
        settings.Name = "GridView_aprobacion_oc";
        settings.CallbackRouteValues = new { Controller = "AprobacionOC", Action = "GridViewPartial_aprobacion_oc" };
        settings.KeyFieldName = "IdOrdenCompra";
        settings.Columns.Add(column =>
        {
            column.FieldName = "IdOrdenCompra";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(5);
        });
        settings.Columns.Add(column =>
        {
            column.Caption = "*";
            column.FieldName = "seleccionado";
            column.ColumnType = MVCxTreeListColumnType.CheckBox;
            column.Width = System.Web.UI.WebControls.Unit.Percentage(5);
        });
        settings.Columns.Add(column =>
        {
            column.Caption = "Menú";
            column.FieldName = "info_menu.DescripcionMenu";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(90);
        });

        settings.SettingsCookies.StoreSelection = true;
        settings.Settings.GridLines = System.Web.UI.WebControls.GridLines.Both;
        settings.SettingsPager.Visible = true;
        settings.SettingsSelection.Enabled = true;
        settings.Settings.ShowFilterRow = true;
        settings.Settings.ShowFilterRowMenu = true;
        settings.SettingsSelection.Recursive = true;
        settings.SettingsSelection.AllowSelectAll = true;
        settings.ClientSideEvents.SelectionChanged = "OnSelectionChanged";
        settings.ClientSideEvents.BeginCallback = "OnBeginCallback";
        settings.DataBound = (s, e) =>
        {
            MVCxTreeList tree = s as MVCxTreeList;
            string bId = ViewData["selectedIDs"] == null ? "" : ViewData["selectedIDs"].ToString();//I have a bId truly
            if (tree.Nodes.Count == 0) return;
            if (tree.Nodes[0] == null) return;
            if (string.IsNullOrEmpty(bId))
                return;
            TreeListNodeIterator iterator = tree.CreateNodeIterator();
            TreeListNode node = iterator.Current;
            tree.SelectAll();
            string[] array = ViewData["selectedIDs"].ToString().Split(',');
            int index = 0;
            while (node != null)
            {
                if (node["IdMenu"] != null)
                {
                    if (!string.IsNullOrEmpty(array.FirstOrDefault(q => q == node["IdMenu"].ToString())))
                    {
                        node.Selected = Convert.ToBoolean(node["seleccionado"]);
                    }
                    else
                        node.Selected = false;
                }

                index++;
                node = iterator.GetNext();
            }
        };

    });

    settings.Columns.Add("IdOrdenCompra");
    settings.Columns.Add("IdProveedor");
    settings.Columns.Add("oc_observacion");
			});
}
@grid.Bind(Model).GetHtml()